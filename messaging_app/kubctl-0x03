#!/bin/bash

echo "ğŸš€ Applying rolling update..."
kubectl apply -f blue_deployment.yaml

echo "ğŸ”„ Monitoring rollout status..."
kubectl rollout status deployment/django-blue

echo "ğŸŒ Testing app availability during rollout..."
for i in {1..10}
do
  curl -s http://localhost/api/ || echo "âŒ Request failed"
  sleep 1
done

echo "ğŸ“¦ Final pod list:"
kubectl get pods -l app=django,version=blue
