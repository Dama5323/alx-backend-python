#!/bin/bash

# Script name: kurbeScript
# Purpose: Set up a local Kubernetes cluster and verify its operation

echo "==== Kubernetes Local Setup Script ===="

# Function to check if a command exists
command_exists() {
    command -v "$1" >/dev/null 2>&1
}

# Check if Minikube is installed
if ! command_exists minikube; then
    echo "âŒ Minikube not found. Please install it first."
    echo "For installation instructions, visit: https://minikube.sigs.k8s.io/docs/start/"
    exit 1
fi

# Check if kubectl is installed
if ! command_exists kubectl; then
    echo "âŒ kubectl not found. Please install it first."
    echo "For installation instructions, visit: https://kubernetes.io/docs/tasks/tools/"
    exit 1
fi

# Start Minikube cluster
echo "ğŸš€ Starting Minikube cluster..."
minikube start

# Verify cluster is running
echo "ğŸ” Verifying cluster status..."
kubectl cluster-info

# Check if cluster is running
if [ $? -eq 0 ]; then
    echo "âœ… Cluster is running successfully!"
else
    echo "âŒ Cluster failed to start. Please check the logs."
    exit 1
fi

# Get available pods in all namespaces
echo "ğŸ“¦ Retrieving available pods..."
kubectl get pods --all-namespaces

echo "âœ¨ Setup completed successfully!"
